# NixieClock

Для работы часов обязательно нужно подключить пин SQW модуля DS3231 к пину ардуино D2, если у вас модуль DS3231mini, то необходимо найти 3-ю ножку микросхемы и также проводком подпаять к пину D2. Бузер будет подключаться к пину D13 также через резистор. Штатный резистор бузера необходимо выпаять с платы(если он имеется).


Если нет возможности подключить пин SQW, то перед прошивкой необходимо установить в "config" - RTC_MODUL 0, это отключит тактирование часов от модуля RTC и переведет на внутреннее тактирование.

Если у вас остановлена неоновая точка вместо светодиодной, то необходимо перед прошивкой установить в "config" - NEON_DOT 1.

Так-же не забудьте выбрать свою плату, в "config" - BOARD_TYPE.


Датчики температуры DHT11/12, DHT21/22, DS18B20 подключаются к пину D1 с подтяжкой 4.7-10кОм к +5в.

Датчик температуры BME(BMP)180/280 подключается к пинам A4 и A5 параллельно модулю часов.


Если есть вопросы/проблемы, или вы нашли баг, пишите в ЛС.


Альтернативная версия.

Что нового:


        ver 1.0.0

    Возможность создавать/удалять будильники(у каждого индивидуальные настройки)
    Возможность создавать свои мелодии для будильника.
    Добавлен режим рандомного эффекта.
    Добавлено отображения температуры/влажности/давления(поддерживаемые датчики - DS3231(встроенный), BME/BMP_280(180), DHT11/12, DHT21/22(AM2301), DS18B20).
    Новая анимация антиотравления.
    Добавлен аварийный режим работы - если по какой-то причине модуль RTC перестанет отвечать, то при старте часов прозвучит долгий писк и часы перейдут на внутреннее тактирование.

         ver 1.1.0

    Новое меню настроек будильника.

         

Что планируется:

    Добавить пункт меню "Коррекция хода" для подстройки хода часов.
    Добавить возможность установки обратной связи на делителе напряжения для ВВ преобразователя.
    Добавить меню отладки для настройки преобразователя с кнопок.
    Добавить поддержку адресных светодиодов WS2812B


Управление:


Настройка времени: Удерживать "левую" кнопку

    Средняя кнопка - выбор, остальные "меньше" и "больше"
    Клик по "выбору" - смена настройки часы/минуты | месяц/дата | год
    Клик "меньше" или "больше" - изменение времени/даты
    Удержать "выбор" - возврат к режиму часов


  Настройка будильника:  Удерживать "правую" кнопку
  
После входа в настройку:

       В левых двух разрядах отображается текущий номер будильника (0 – нет будильников).
       В крайнем правом разряде отображается текущий режим будильника (если будильников нет –      ничего не отображается).

Экран «Выбор номера и режима будильника»

   Нажатие на:

         Правую клавишу – увеличивает значение.
         Левую клавишу – уменьшает значение.
         Среднюю клавишу -  переводит управление по кругу («Выбор будильника» -> «Режим будильника»).

   Удержание:

    Правой клавиши –
    (курсор на «режим будильника») - переход к экрану настройки дней недели/мелодии.
    (курсор на «номер будильника») - добавить новый будильник.
    Левой клавиши –
    (курсор на «режим будильника») - переход к экрану настройки времени будильника.
    (курсор на «номер будильника») – удалить текущий будильник будильника.
    Средней клавиши – выход к режиму часов.

После перехода в настройку дней недели/мелодии:

       В первом разряде отображается текущий день недели (если режим будильника <4 - ничего не отображается).
       Во втором разряде отображается активация дня недели (если режим будильника <4 - ничего не отображается).
       В третьем и четвертом разряде отображается текущая мелодия будильника.

Экран «Настройка дней недели/мелодии»

   Нажатие на:

         Правую клавишу – увеличивает значение.
         Левую клавишу – уменьшает значение.
         Среднюю клавишу -  переводит управление по кругу («День недели» -> «Активация дня недели»), если курсор на выборе мелодии - переводит обратно к выбору дня недели.

   Удержание:

        Правой клавиши – переход к экрану настройке мелодии.
        Левой клавиши – переход к экрану настройки времени будильника.
        Средней клавиши – выход к выбору режима будильника.

После перехода в настройку времени будильника:

       В первом и втором разряде отображается время в часах.
       В третьем и четвертом разряде отображается время в минутах.

Экран «Настройка времени будильника»

   Нажатие на:

         Правую клавишу – увеличивает значение.
         Левую клавишу – уменьшает значение.
         Среднюю клавишу -  переводит управление по кругу («ЧЧ» -> «ММ»).

   Удержание:

        Правой клавиши – переход к экрану настройки дней недели/мелодии.
        Левой клавиши –   переход к экрану настройки времени будильника.
        Средней клавиши – выход к выбору режима будильника.


    Режимы будильника:

    00 - выключен
    01 - однократный
    02 - каждый день
    03 - по будням
    04 - выбор по дням недели


  Основные настройки:  Удерживать "среднюю" кнопку

    Средняя кнопка - выбор, остальные "меньше" и "больше"
    Клик по "выбору" - переход в пункт меню для настройки/выход к выбору пункта меню
    Клик "меньше" или "больше" - выбор пункта меню
    Удержать "выбор" - возврат к режиму часов

  Пункты меню:

    1 - Формат времени (12ч | 24ч)
    2 - Глюки вкл/выкл (0 - выкл | 1 - вкл)
    3 - Звук кнопок вкл/выкл (0 - выкл | 1 - вкл)
    4 - Время звука смены часа(Начало : Конец)
    5 - Время смены подсветки(Ночь : День)
    6 - Яркость индикаторов(Ночь : День)
    7 - Настройка датчика температуры(Коррекция : Сенсор)


Управление кнопками В РЕЖИМЕ ЧАСОВ:


Клик по "правой" кнопке отображает текущую дату, затем клик по "правой" кнопке переключает дату/год.


Клик по "средней" кнопке отображает текущий режим подсветки.

    Клик по "правой" кнопке - переключает режим анимации цифр(0 - выкл, 1 - рандомная смена эффектов, 2 - плавное угасание и появление , 3 - перемотка по порядку числа, 4 - перемотка по порядку катодов в лампе, 5 - поезд, 6 - резинка)
    Клик по "средней" кнопке - переключает режим подсветки(0 - выкл | 1 - статичная | 2 - динамичная(дыхание)
    Клик по "левой" кнопке - переключает режим точек(0 - выкл | 1 - статичная | 2 - динамичная(мигает)

Клик по "левой" кнопке отображает текущую температуру, затем клик по "левой" кнопке переключает температуру/давление/влажность.
